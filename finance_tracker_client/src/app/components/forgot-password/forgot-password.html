<div class="login-wrapper">
    <div class="login-container">
        <div class="brand-section">
            <h1>Finance Tracker</h1>
            <p>Recover your account securely.</p>
        </div>

        <div class="glass-panel">
            <h2 class="form-title">Forgot Password</h2>
            
            <div *ngIf="!emailSent; else codeSentTemplate">
                <form (ngSubmit)="onSubmit()">
                    <div class="input-group">
                        <input 
                            type="email" 
                            [(ngModel)]="email" 
                            name="email" 
                            required 
                            placeholder="Enter your email" 
                        />
                    </div>
                    
                    <button type="submit" class="btn-login" [disabled]="loading">
                        {{ loading ? 'Sending...' : 'Send Reset Code' }}
                    </button>

                    <div *ngIf="errorMessage" class="error-message">
                        {{ errorMessage }}
                    </div>
                </form>
            </div>

            <ng-template #codeSentTemplate>
                <div class="success-message" style="color: #4caf50; margin-bottom: 20px;">
                    Reset code sent to {{ email }}
                </div>
                <form (ngSubmit)="onReset()">
                    <div class="input-group">
                        <input 
                            type="text" 
                            [(ngModel)]="token" 
                            name="token" 
                            required 
                            placeholder="Enter 6-digit code" 
                        />
                    </div>
                    <div class="input-group">
                        <input 
                            type="password" 
                            [(ngModel)]="newPassword" 
                            name="newPassword" 
                            required 
                            placeholder="New Password" 
                        />
                    </div>
                    
                    <button type="submit" class="btn-login" [disabled]="loading">
                        {{ loading ? 'Resetting...' : 'Reset Password' }}
                    </button>

                     <div *ngIf="errorMessage" class="error-message">
                        {{ errorMessage }}
                    </div>
                </form>
            </ng-template>

            <div class="footer-actions">
                <button type="button" class="btn-register" (click)="backToLogin()">Back to Login</button>
            </div>
        </div>
    </div>
</div>
